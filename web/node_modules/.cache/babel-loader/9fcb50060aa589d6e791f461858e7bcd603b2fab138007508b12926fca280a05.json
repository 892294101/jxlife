{"ast":null,"code":"import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, createTextVNode as _createTextVNode, createCommentVNode as _createCommentVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nimport _imports_0 from '../assets/logo.png';\nconst _withScopeId = n => (_pushScopeId(\"data-v-ded9d710\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"main\"\n};\nconst _hoisted_2 = {\n  class: \"form\"\n};\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"img\", {\n  src: _imports_0,\n  class: \"logo\",\n  alt: \"logo\"\n}, null, -1 /* HOISTED */));\nconst _hoisted_4 = {\n  style: {\n    \"display\": \"inline-flex\"\n  }\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_input = _resolveComponent(\"el-input\");\n  const _component_el_form_item = _resolveComponent(\"el-form-item\");\n  const _component_el_image = _resolveComponent(\"el-image\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_form = _resolveComponent(\"el-form\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_hoisted_3, _createVNode(_component_el_form, {\n    model: $data.loginForm,\n    rules: $data.rules,\n    ref: \"loginForm\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_form_item, {\n      prop: \"username\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        type: \"text\",\n        modelValue: $data.loginForm.username,\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.loginForm.username = $event),\n        autocomplete: \"off\",\n        size: \"large\",\n        \"prefix-icon\": $setup.User\n      }, null, 8 /* PROPS */, [\"modelValue\", \"prefix-icon\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_form_item, {\n      prop: \"password\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        type: \"password\",\n        modelValue: $data.loginForm.password,\n        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.loginForm.password = $event),\n        autocomplete: \"off\",\n        size: \"large\",\n        \"prefix-icon\": $setup.Lock\n      }, null, 8 /* PROPS */, [\"modelValue\", \"prefix-icon\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_form_item, {\n      prop: \"captchaValue\"\n    }, {\n      default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_4, [_createVNode(_component_el_input, {\n        modelValue: $data.loginForm.captchaValue,\n        \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.loginForm.captchaValue = $event),\n        \"prefix-icon\": $setup.CircleCheck,\n        size: \"large\",\n        style: {\n          \"width\": \"50%\"\n        },\n        maxlength: \"5\"\n      }, null, 8 /* PROPS */, [\"modelValue\", \"prefix-icon\"]), _createVNode(_component_el_image, {\n        src: $data.captchaImg,\n        class: \"captchaImg\",\n        onClick: $options.getCaptcha\n      }, null, 8 /* PROPS */, [\"src\", \"onClick\"])])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_form_item, null, {\n      default: _withCtx(() => [_createVNode(_component_el_button, {\n        type: \"primary\",\n        class: \"button\",\n        size: \"large\",\n        onClick: _cache[3] || (_cache[3] = $event => $options.submitForm('loginForm'))\n      }, {\n        default: _withCtx(() => [_createTextVNode(\"登 录\")]),\n        _: 1 /* STABLE */\n      })]),\n\n      _: 1 /* STABLE */\n    })]),\n\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"model\", \"rules\"])]), _createCommentVNode(\"    <div class=\\\"footer\\\">\\n      <div>MIT License Copyright (c) 2022 zchengo</div>\\n      <div><el-divider direction=\\\"vertical\\\" /></div>\\n      <a href=\\\"https://github.com/zchengo/imall\\\">Github</a>\\n      <div><el-divider direction=\\\"vertical\\\" /></div>\\n      <a href=\\\"https://www.zhihu.com/people/87-4-8-5\\\">Zhihu</a>\\n      <div><el-divider direction=\\\"vertical\\\" /></div>\\n      <a href=\\\"#\\\">About</a>\\n    </div>\")]);\n}","map":{"version":3,"names":["_imports_0","class","_createElementVNode","src","alt","style","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_createVNode","_component_el_form","model","$data","loginForm","rules","ref","_component_el_form_item","prop","_component_el_input","type","username","$event","autocomplete","size","$setup","User","password","Lock","_hoisted_4","captchaValue","CircleCheck","maxlength","_component_el_image","captchaImg","onClick","$options","getCaptcha","_component_el_button","_cache","submitForm","_createCommentVNode"],"sources":["/Users/kqwang/development/gowork/src/github.com/892294101/jxlife/web/src/view/Login.vue"],"sourcesContent":["<template>\n  <div class=\"main\">\n    <div class=\"form\">\n      <img src=\"../assets/logo.png\" class=\"logo\" alt=\"logo\"/>\n      <el-form :model=\"loginForm\"\n               :rules=\"rules\"\n               ref=\"loginForm\">\n        <el-form-item prop=\"username\">\n          <el-input type=\"text\"\n                    v-model=\"loginForm.username\"\n                    autocomplete=\"off\"\n                    size=\"large\"\n                    :prefix-icon=\"User\"/>\n        </el-form-item>\n        <el-form-item prop=\"password\">\n          <el-input type=\"password\"\n                    v-model=\"loginForm.password\"\n                    autocomplete=\"off\"\n                    size=\"large\"\n                    :prefix-icon=\"Lock\"/>\n        </el-form-item>\n        <el-form-item prop=\"captchaValue\">\n          <div style=\"display: inline-flex;\">\n            <el-input v-model=\"loginForm.captchaValue\"\n                      :prefix-icon=\"CircleCheck\"\n                      size=\"large\"\n                      style=\"width: 50%;\"\n                      maxlength=\"5\"/>\n            <el-image :src=\"captchaImg\" class=\"captchaImg\" @click=\"getCaptcha\"/>\n          </div>\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"primary\"\n                     class=\"button\"\n                     size=\"large\"\n                     @click=\"submitForm('loginForm')\">登 录</el-button>\n        </el-form-item>\n      </el-form>\n    </div>\n<!--    <div class=\"footer\">\n      <div>MIT License Copyright (c) 2022 zchengo</div>\n      <div><el-divider direction=\"vertical\" /></div>\n      <a href=\"https://github.com/zchengo/imall\">Github</a>\n      <div><el-divider direction=\"vertical\" /></div>\n      <a href=\"https://www.zhihu.com/people/87-4-8-5\">Zhihu</a>\n      <div><el-divider direction=\"vertical\" /></div>\n      <a href=\"#\">About</a>\n    </div>-->\n  </div>\n</template>\n\n<script>\nimport { ElMessage } from 'element-plus'\nimport { User, Lock, CircleCheck } from '@element-plus/icons-vue'\nexport default {\n  name: \"Login\",\n  setup() {\n    return {User, Lock, CircleCheck}\n  },\n  data() {\n    return {\n      show: true,\n      loginForm: {\n        username: 'admin',\n        password: 'admin',\n        captchaId: '',\n        captchaValue: '',\n      },\n      captchaImg: null,\n      rules: {\n        username: [\n          {equired: true, message: '请输入账号', trigger: 'blur'}\n        ],\n        password: [\n          {equired: true, message: '请输入密码', trigger: 'blur'}\n        ],\n        captchaValue: [\n          {required: true, message: '请输入验证码', trigger: 'blur'},\n          {min: 4, max: 4, message: '长度为 4 个字符', trigger: 'blur'}\n        ],\n      }\n    };\n  },\n  mounted() {\n    this.getCaptcha();\n  },\n  updated() {\n    this.getCaptcha();\n  },\n  methods: {\n\n    // 用户登录\n    submitForm(formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          this.$axios.post('/login', {\n            username: this.loginForm.username,\n            password: this.loginForm.password,\n            captchaId: this.loginForm.captchaId,\n            captchaValue: this.loginForm.captchaValue,\n          }).then((response) => {\n            localStorage.setItem(\"token\", response.data.data.token)\n            localStorage.setItem(\"sid\", response.data.data.sid)\n            ElMessage({ message: '欢迎回来', type: 'success'})\n            this.$router.push('/home');\n          }).catch((error) => {\n            console.log(error);\n          })\n        }\n      });\n      this.getCaptcha();\n    },\n\n    // 获取验证码\n    getCaptcha() {\n      this.$axios.get('/captcha').then(response => {\n        this.loginForm.captchaId = response.data.data.captchaId\n        this.captchaImg = response.data.data.captchaImg\n        this.loginForm.captchaValue = ''\n      })\n    }\n  }\n}\n</script>\n\n<style scoped>\n.main {\n  width: 100%;\n  height: 100vh;\n  display: flex;\n  background-image: url(\"../assets/back.png\");\n  background-size: 100% 60%;\n  background-repeat: no-repeat;\n  /* background-color: #e8ecf1; */\n  background-color: #F5F7FA;\n}\n.form {\n  width: 25%;\n  height: 50%;\n  margin: 150px auto;\n  text-align: center;\n  padding: 20px;\n  background-color: white;\n  border-radius: 15px;\n  box-shadow: 0px 0px 1px #F2F6FC;\n}\n.logo {\n  width: 80px;\n  height: 80px;\n  margin: 20px;\n  border-radius: 15px;\n  box-shadow: 0px 0px 12px #ebeff4;\n}\n.captchaImg {\n  width: 45%;\n  height: 40px;\n  margin-left: 5%;\n  float: left;\n  border-radius: 5px;\n  background-color: #ecf5ff;\n}\n.button {\n  width: 100%;\n  margin-top: 5px;\n}\n\n.footer{\n  bottom: 0;\n  width: 100%;\n  height: 80px;\n  position: absolute;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  color: #606266;\n  font-size: 10px;\n}\n\n.footer a{\n  color: #606266;\n}\n.footer a:hover{\n  color: #2d2d2f;\n  transition: 0.5s;\n}\n</style>"],"mappings":";OAGWA,UAAwB;;;EAF5BC,KAAK,EAAC;AAAM;;EACVA,KAAK,EAAC;AAAM;gEACfC,mBAAA,CAAuD;EAAlDC,GAAwB,EAAxBH,UAAwB;EAACC,KAAK,EAAC,MAAM;EAACG,GAAG,EAAC;;;EAmBtCC,KAA6B,EAA7B;IAAA;EAAA;AAA6B;;;;;;;uBArB1CC,mBAAA,CA+CM,OA/CNC,UA+CM,GA9CJL,mBAAA,CAoCM,OApCNM,UAoCM,GAnCJC,UAAuD,EACvDC,YAAA,CAiCUC,kBAAA;IAjCAC,KAAK,EAAEC,KAAA,CAAAC,SAAS;IAChBC,KAAK,EAAEF,KAAA,CAAAE,KAAK;IACbC,GAAG,EAAC;;sBACX,MAMe,CANfN,YAAA,CAMeO,uBAAA;MANDC,IAAI,EAAC;IAAU;wBAC3B,MAI+B,CAJ/BR,YAAA,CAI+BS,mBAAA;QAJrBC,IAAI,EAAC,MAAM;oBACFP,KAAA,CAAAC,SAAS,CAACO,QAAQ;mEAAlBR,KAAA,CAAAC,SAAS,CAACO,QAAQ,GAAAC,MAAA;QAC3BC,YAAY,EAAC,KAAK;QAClBC,IAAI,EAAC,OAAO;QACX,aAAW,EAAEC,MAAA,CAAAC;;;QAE1BhB,YAAA,CAMeO,uBAAA;MANDC,IAAI,EAAC;IAAU;wBAC3B,MAI+B,CAJ/BR,YAAA,CAI+BS,mBAAA;QAJrBC,IAAI,EAAC,UAAU;oBACNP,KAAA,CAAAC,SAAS,CAACa,QAAQ;mEAAlBd,KAAA,CAAAC,SAAS,CAACa,QAAQ,GAAAL,MAAA;QAC3BC,YAAY,EAAC,KAAK;QAClBC,IAAI,EAAC,OAAO;QACX,aAAW,EAAEC,MAAA,CAAAG;;;QAE1BlB,YAAA,CASeO,uBAAA;MATDC,IAAI,EAAC;IAAc;wBAC/B,MAOM,CAPNhB,mBAAA,CAOM,OAPN2B,UAOM,GANJnB,YAAA,CAIyBS,mBAAA;oBAJNN,KAAA,CAAAC,SAAS,CAACgB,YAAY;mEAAtBjB,KAAA,CAAAC,SAAS,CAACgB,YAAY,GAAAR,MAAA;QAC9B,aAAW,EAAEG,MAAA,CAAAM,WAAW;QACzBP,IAAI,EAAC,OAAO;QACZnB,KAAmB,EAAnB;UAAA;QAAA,CAAmB;QACnB2B,SAAS,EAAC;8DACpBtB,YAAA,CAAoEuB,mBAAA;QAAzD9B,GAAG,EAAEU,KAAA,CAAAqB,UAAU;QAAEjC,KAAK,EAAC,YAAY;QAAEkC,OAAK,EAAEC,QAAA,CAAAC;;;QAG3D3B,YAAA,CAKeO,uBAAA;wBAJb,MAG2D,CAH3DP,YAAA,CAG2D4B,oBAAA;QAHhDlB,IAAI,EAAC,SAAS;QACdnB,KAAK,EAAC,QAAQ;QACduB,IAAI,EAAC,OAAO;QACXW,OAAK,EAAAI,MAAA,QAAAA,MAAA,MAAAjB,MAAA,IAAEc,QAAA,CAAAI,UAAU;;0BAAe,MAAG,C,iBAAH,KAAG,E;;;;;;;;2CAIzDC,mBAAA,4aAQa,C"},"metadata":{},"sourceType":"module","externalDependencies":[]}